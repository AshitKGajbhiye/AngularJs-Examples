<!DOCTYPE html>
<html>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<body>
<div ng-controller="bookViewCtrl">
  <h3>View the list of Books</h3>

  <div class="row-fluid">

    <div class="span12">

      <div class="span7">
        <table class="table table-bordered table-striped table-hover">
          <tr>
            <th>Book name</th>
            <th>Price</th>
          </tr>
          <tr ng-repeat="book in books">
            <td>{{book.name}}</td>
            <td>{{book.price}}</td>
          </tr>
        </table>
      </div>

      <div class="span4 offset1">
        <fieldset>
          <legend>Add a new book</legend>
          <label for="book-name">Book name:</label>
          <input type="text" name="book-name" ng-model="bookData.name" id="book-name">

          <label for="book-price">Book price:</label>
          <input type="text" name="book-price" ng-model="bookData.price" id="book-price">

          <label for="author-id">Author id:</label>
          <input type="text" name="author-id" ng-model="bookData.authorId" id="author-id">

          <label></label>
          <button class="btn btn-large btn-success" ng-click="addNewBook(bookData)">Add</button>
        </fieldset>
      </div>

    </div>

  </div>
</div>
<script>
  singlePage.Module.controller('bookViewCtrl', function($scope,$routeParams,sharedBooks){
  $scope.name = 'bookViewCtrl';
    sharedBooks.getBooks().then(function(books){
      $scope.books = books;
    });

    $scope.$on('handleSharedBookds',function(events, books){
      $scope.books=books;
    });
// handling the submit button for the form 
$scope.addNewBook = function(bookData){
  $params = $.param({
    "name": bookData.name,
    "price": bookData.price,
    "author-id":bookData.author-id
  })
  sharedBooks.saveBooks($params);
}
  });
}

</script>

</body>
</html>